import 'package:firedart/firedart.dart';
import 'dart:async';
import '../models/item_model3.dart';

class getfirestoredata {
  //getfirestoredata();

  static Future<ItemsList> getdata() async {
    String projectId = 'kickoff-e12f6';
    String apiKey = 'AIzaSyBot_ntjdO3B5gh3-ZOYEaHzROrmoIxj_U';
    String email = 'andybnsn@gmail.com';
    String password = 'Pwd123&&';

    var tokenStore = VolatileStore();
    var firebaseAuth = FirebaseAuth(apiKey, tokenStore);
    var firestore = Firestore(projectId, auth: firebaseAuth);
    try {
      await firebaseAuth.signIn(email, password);
    } catch (e) {
      print(e);
    }
    print("Firestore");
    print(firestore);
    Firestore.initialize('kickoff-e12f6');

    Page<Document> map = await firestore.collection("questions").get();
    print("mapped");
    print(map);

    Map<String, dynamic> mapped;

    mapped = map.toMap();

    //var users = UserCollection.fromMap(map);
    ItemsList itemList = new ItemsList();
    ItemsList questions = itemList.mapToList(mapped);

    return questions;
    //ItemsList.fromJson(map, 1);
  }
}
